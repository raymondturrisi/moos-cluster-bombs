# Singularity definition file, to provide similar behavior and performance as it was in docker

Bootstrap: docker
From: raymondturrisi/focal-fossa-it:latest

%environment
    export DEBIAN_FRONTEND=noninteractive

%post
#Make directories in the container which will be shared with the host
    export TMPDIR=/tmp
    mkdir -p /root/dockerlogs
    mkdir -p /root/moos-cluster-bombs
    mkdir -p /root/.ssh
    cd /root
    #Install moos-specific requirements
    DEBIAN_FRONTEND=noninteractive apt-get update -y && apt-get upgrade -y
    DEBIAN_FRONTEND=noninteractive apt-get install -y subversion git g++ cmake python3 python3-pip libfltk1.3-dev freeglut3-dev libpng-dev libjpeg-dev libxft-dev libxinerama-dev libtiff5-dev xterm
    svn co https://oceanai.mit.edu/svn/moos-ivp-aro/trunk/ moos-ivp
    cd moos-ivp
    #Build core moos ivp
    ./build.sh

%labels
    Author Raymond Turrisi
    Version v0.0.1
